import { useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import { Tooltip, Box, Typography, IconButton } from '@mui/material';
import { ChevronLeft, ChevronRight } from '@mui/icons-material';
import styles from '../EventPage.module.scss';
import homeIcon from '../../../pics/homelogo.png';
import { Link } from 'react-router-dom';
import { timelineEvents } from './TimeLineEvents/timelineEvents'; 

const WestBelPage = () => {
  const timelineRef = useRef<HTMLDivElement>(null);
  const navigate = useNavigate();
  const scrollTimeline = (direction: 'left' | 'right') => {
    if (timelineRef.current) {
      timelineRef.current.scrollBy({
        left: direction === 'left' ? -200 : 200,
        behavior: 'smooth'
      });
    }
  };

  return (
    <div className={styles.container}>
      {/* Шапка */}
      <header className={styles.header}>
        <Link to="/home">
          <IconButton className={styles.homeButton} aria-label="На главную">
            <img src={homeIcon} alt="На главную" className={styles.homeIcon} />
          </IconButton>
        </Link>
        <Typography variant="h1" className={styles.headerTitle}>
          События в истории Беларуси
        </Typography>
      </header>

      {/* Основное содержимое */}
      <main className={styles.mainContent}>
        {/* Горизонтальная лента времени */}
        <div className={styles.timelineContainer}>
          <IconButton
            className={styles.timelineArrow}
            onClick={() => scrollTimeline('left')}
          >
            <ChevronLeft />
          </IconButton>

          <div className={styles.timelineWrapper} ref={timelineRef}>
            <div className={styles.timeline}>
              {timelineEvents.map((event, index) => (
                <Tooltip
                  key={index}
                  title={
                    <Box sx={{ p: 1 }}>
                      {event.events.map((item, itemIndex) => (
                        <Box
                          key={itemIndex}
                          sx={{
                            mb: 1,
                            cursor: item.link ? "pointer" : "default",
                            "&:hover": {
                              backgroundColor: item.link ? "rgba(0, 0, 0, 0.05)" : "transparent"
                            },
                          }}
                          onClick={(e) => {
                            e.stopPropagation(); // Чтобы не срабатывал клик по маркеру
                            if (item.link) navigate(item.link);
                          }}
                        >
                          <Typography variant="body2" sx={{ fontFamily: "Huninn", fontWeight: "bold", color: "#5c3a21" }}>
                            {item.title}
                          </Typography>
                        </Box>
                      ))}
                    </Box>
                  }
                  placement="bottom"
                  arrow
                >
                  <div className={styles.timelineMarker}>
                    {event.year}
                  </div>
                </Tooltip>
              ))}
            </div>
          </div>

          <IconButton
            className={styles.timelineArrow}
            onClick={() => scrollTimeline('right')}
          >
            <ChevronRight />
          </IconButton>
        </div>

        <div className={styles.textBlock}>
          <div className={styles.scrollableContent}>
            <Typography variant="h2" className={styles.figureName}>
              Присоединение Западной Беларуси
            </Typography>
            <Typography variant="subtitle1" className={styles.figureDates}>
              (1939 г.)
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              Воссоединение Западной Беларуси и БССР, произошедшее в начале Второй мировой войны, стало
              важной вехой в истории страны. В результате польского похода Красной Армии, который начался
              17 сентября 1939 года, белорусский народ снова получил утраченную в 20-е годы прошлого столетия
              возможность жить и развиваться в границах одной республики.
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              В результате польско-советской войны 1919-1920 годов территория Беларуси была разделена
              между двумя государствами. В восточной ее части была создана Белорусская Советская Социалистическая
              Республика, вошедшая в состав СССР. Западные территории были присоединены к Польше после подписания
              Рижского мирного договора 18 марта 1921 года. В результате в составе польского государства оказались
              территория Новогрудского, большая часть Полесского воеводств, восемь восточных уездов Белостокского
              воеводства. Позже к ним добавилось Виленское воеводство, образованное после присоединения к Польше в
              марте 1922 года Ошмянского, Браславского, Воложинского, Вилейского, Виленско-Трокского, Дисненского,
              Молодечненского, Поставского, Свенцянского уездов. Площадь этого региона, в котором проживало преимущественно
              белорусское население, составляла около 113 тыс. кв.км. За этими землями закрепилось неофициальное наименование
              "Западная Беларусь", которое власти Польши не признавали, используя название "крэсы всходне" (восточные окраины).
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              Западная Беларусь была относительно отсталым аграрным придатком Польши, который использовался
              как источник сырья и дешевой рабочей силы. Удельный вес Западной Беларуси в промышленном
              производстве государства немногим превышал 3%. В экономике региона наблюдался застой. На многих
              предприятиях отсутствовала механизация, электрификация, преобладал ручной труд. Если в
              промышленности в 1921 году было занято чуть более 6% населения, то в сельском хозяйстве - свыше
              80% жителей Западной Беларуси. В условиях сохранения крупного помещичьего землевладения крестьяне
              страдали от малоземелья, тяжелых налогов, высоких цен на промышленные товары широкого потребления.
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              В отношении белорусов польские власти проводили политику полонизации и ассимиляции. Они не
              позволяли использовать белорусский язык в государственных учреждениях, закрывали белорусские
              школы. Около 35% населения оставалось неграмотным. В Западной Беларуси преследовалась белорусская
              пресса, не было белорусских театров и музыкальных учреждений. Белорусский народ не желал мириться
              с подневольным положением и вел борьбу за социальное и национальное освобождение. Нередкими были
              выступления рабочих и крестьян. Депутаты-белорусы вели парламентскую борьбу в составе Белорусского
              посольского клуба. Свой весомый вклад внесли и культурно-просветительские организации, ведущей
              среди которых было Товарищество белорусской школы. Во главе революционного движения долгие годы
              стояла Коммунистическая партия Западной Беларуси.
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              В конце 1930-х годов угроза войны, исходившая от нацистской Германии, нависла над Европой.
              СССР предпринял попытку дипломатическим путем предотвратить распространение гитлеровской агрессии
              на Восток. Советский Союз заключил с Германией пакт о ненападении, который был подписан 23 августа
              1939 года в Москве. К документу прилагался дополнительный секретный протокол о разделе сфер влияния
              между Германией и Советским Союзом. Согласно этому документу, в случае ликвидации Польского государства
              и раздела его территорий в сферу влияния СССР попадали в том числе и земли Западной Беларуси.
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              1 сентября 1939 года гитлеровская Германия напала на Польшу - началась Вторая мировая война.
              Немецкие дивизии быстро продвигались вглубь польского государства и к середине сентября достигли
              Западной Беларуси и Западной Украины. Когда польская армия в целом была разбита и практически все
              исконные польские территории заняты немецкими войсками, 17 сентября 1939 года Красная Армия перешла
              границу. Советское правительство намеревалось в условиях военных действий взять под защиту население
              Западной Беларуси.
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              Продвижение советских войск шло быстро: 18 сентября они заняли Свентяны, Лиду, Новогрудок,
              Слоним, Волковыск; 19 сентября - Пружаны и Кобрин. Большинство подразделений Войска польского
              сдавалось без боя. Те части, основу которых составляли этнические украинцы и белорусы, переходили
              на сторону Красной Армии. Большинство жителей Западной Беларуси встречало советских солдат с
              радостью и оказывало действенную помощь. Во многих местах создавались военно-революционные комитеты,
              которые организовывали отряды из рабочих и крестьян. Эти формирования разоружали полицейских, брали
              под охрану мосты, предприятия, другие важные объекты.
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              Но не везде Красную Армию встречали с цветами. Несколько дней продолжалась битва за Гродно.
              Упорное сопротивление здесь оказали около 3 тыс. солдат и офицеров учебного подразделения и
              полицейских. Но 20 сентября город был взят. А 22 сентября советские войска вошли в Брест-Литовск и Белосток.
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              С приходом Красной Армии в воеводствах и поветовых центрах начали формироваться органы новой
              власти. Именно они занялись осуществлением первых преобразований, а затем организацией выборов
              депутатов в Народное собрание Западной Беларуси, которое должно было решить основные вопросы
              государственного строя. Выборы прошли 22 октября 1939 года в обстановке политического подъема.
              На избирательные участки пришло 96,7% выборщиков.
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              Заседание Народного собрания Западной Беларуси прошло 28-30 октября 1939 года в Белостоке.
              На нем была принята Декларация о провозглашении советской власти и вхождении Западной Беларуси
              в состав БССР. 2 ноября 1939 года внеочередная V сессия Верховного Совета СССР первого созыва
              решила удовлетворить просьбу Народного собрания Западной Беларуси и включить ее территорию в
              состав СССР, объединив ее с БССР. На внеочередной III сессии Верховного Совета БССР 14 ноября
              1939 года был подписан закон "О принятии Западной Белоруссии в состав Белорусской Советской
              Социалистической Республики".
            </Typography>

            <Typography variant="body1" className={styles.paragraph}>
              В результате принятия этих исторических документов была восстановлена территориальная целостность
              республики, объединен белорусский народ. Территория и население республики увеличились почти вдвое.
              На западнобелорусских землях, вошедших в состав БССР, были образованы Барановичская, Белостокская,
              Брестская, Вилейская и Пинская области. Эти регионы были вовлечены в радикальные социально-экономические
              преобразования. Была проведена национализация предприятий и банков, осуществлялась коллективизация и
              механизация сельского хозяйства. Коренные изменения произошли в образовании, здравоохранении, науке и
              культуре. Активизировалась работа по ликвидации безграмотности, причем учебные заведения создавались
              для различных этнических групп населения: в 1941 году в западных областях БССР действовали 4192 белорусские,
              987 польских, 173 русских, 168 еврейских, 63 литовские, 43 украинские школы. Были созданы театры, открыто
              100 кинотеатров, 92 дома культуры, 220 библиотек. Во всех областных городах и райцентрах появилась
              белорусскоязычная периодика. Поступательное развитие экономики, социальной сферы западных областей
              республики было прервано началом Великой Отечественной войны.
            </Typography>
          </div>
        </div>
      </main>
    </div>
  );
};

export { WestBelPage };